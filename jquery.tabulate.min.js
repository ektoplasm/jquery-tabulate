(function(a){a.fn.tabulate=function(u,s,e){var l=this;s=s||{};var t=a.extend({},a.fn.tabulate.defaults,s);if(!a.fn.tabulate.regional[t.locale]){t.locale=a.fn.tabulate.defaults.locale}var o=a.extend({},a.fn.tabulate.regional[t.locale]);l.addClass("tblt-container");var r=a("<table/>"),q=a("<thead/>"),b=a("<tbody/>"),j=a("<div/>"),m=a("<select/>"),f=a('<input type="text"/>'),h=a(b).find("tr"),p=((t.currentPage-1)*t.perPage)+1,c=p+t.perPage-1,i=Math.ceil(h.length/t.perPage),g=a("<div/>"),d=a("<button/>"),k=a("<button/>"),n=a("<span/>");this.createHeaderRow=function(v){var x=v.length,y=a("<tr/>");y.addClass("tblt-row-header "+t.headerRowClass);for(var w=0;w<x;w++){y.append(a('<th scope="col" nowrap>'+v[w]+"</th>").addClass("tblt-column-"+(w+1)))}return y};this.createSimpleRow=function(v){var w=a("<tr/>");a.each(v,function(y,x){w.append(a("<td>"+x+"</td>").addClass("tblt-column-"+(y+1)))});return w};this.refresh=function(){h=a(r).find("tbody tr");p=((t.currentPage-1)*t.perPage)+1;c=p+t.perPage-1;i=Math.ceil(h.length/t.perPage);if(c>h.length){c=h.length}h.hide();h.slice((p-1),c).show();n.html(o.infoText.replace("FROM",p.toString()).replace("TO",c.toString()).replace("TOTAL",h.length.toString())).addClass("tblt-info-paginator "+t.infoTextClass);a(g).toggle(!(h.length<=t.perPage))};this.paginate=function(){i=Math.ceil(h.length/t.perPage);d.html(o.previousButtonText).addClass("tblt-prev "+t.previousButtonClass).click(function(){if(t.currentPage-1<1){t.currentPage=1}else{t.currentPage--}l.refresh()});k.html(o.nextButtonText).addClass("tblt-next "+t.nextButtonClass).click(function(){if(t.currentPage+1>i){t.currentPage=i}else{t.currentPage++}l.refresh()});g.addClass("tblt-pagination "+t.containerPaginationClass);g.append(d).append(n).append(k);l.append(g);this.refresh()};this.populate=function(v){v=v||u;b.empty();a.each(v,function(x,w){if(x>0){var y=l.createSimpleRow(w).addClass("tblt-row-"+x);y.addClass(x%2==0?" tblt-even":" tblt-odd");b.append(y)}});r.append(b)};this.search=function(v){b.empty();t.currentPage=1;a.each(u,function(w,z){var x=false;a.each(z,function(C,B){var A=new RegExp(v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");if(A.test(B)){x=true;return false}});if(x&&w>0){var y=l.createSimpleRow(z).addClass("tblt-row-"+w);y.addClass(w%2==0?" tblt-even":" tblt-odd");b.append(y)}});r.append(b);l.refresh();if(e){e.call()}};this.setupToolbar=function(){var y=a('<div class="tblt-search"/>'),w=a('<div class="tblt-selectbox"/>'),v=[10,30,50,100,200];a.each(v,function(z,B){var A=a('<option value="'+B+'">'+B+"</option>");m.append(A);if(B==t.perPage){A.attr("selected","selected")}});m.addClass("tblt-select "+t.lengthSelectorClass);var x=m.clone().wrap("<div>").parent().html();w.append(o.lengthSelectorText.replace("SELECT",x)).find(".tblt-select").eq(0).change(function(){t.perPage=parseInt(a(this).val());l.refresh()});f.addClass(t.searchBoxClass);y.append(a('<label class="tblt-label-search"/>').html(o.search).append(f));f.keyup(function(){l.search(a(this).val())});j.append(y).append(w)};if(u.length<1){l.html('<div class="no-results">'+o.emptySet+"</div>");return}r.addClass("tblt-table "+t.tableClass);q.append(this.createHeaderRow(u[0]));r.append(q);this.populate();this.setupToolbar();l.empty().append(j).append(r);this.paginate();if(e){e.call()}};a.fn.tabulate.regional={"en-US":{previousButtonText:"Previous",nextButtonText:"Next",infoText:"From FROM to TO of TOTAL",lengthSelectorText:"Show SELECT records",emptySet:"No records found",search:"Search: "},"pt-BR":{previousButtonText:"Anterior",nextButtonText:"Pr\u00F3ximo",infoText:"Mostrando de FROM at\u00E9 TO de TOTAL",lengthSelectorText:"Mostrar SELECT registros",emptySet:"Nenhum resultado encontrado",search:"Pesquisar: "}};a.fn.tabulate.defaults={tableClass:"",headerRowClass:"",perPage:30,containerPaginationClass:"",previousButtonClass:"",nextButtonClass:"",infoTextClass:"",lengthSelectorClass:"",searchBoxClass:"",currentPage:1,locale:"en-US"}})(jQuery);